<ui:composition
        xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://xmlns.jcp.org/jsf/core"
        xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
        xmlns:p="http://xmlns.jcp.org/jsf/passthrough">

    <!-- This is the description component. Editable -->

    <!-- Including the js file -->
    <h:outputScript library="js" name="notifications.js" target="body"/>

    <div class="cv-bloc-element">
        <!-- (descripton) -->
        <div class="panel panel-blue">
            <div class="panel-heading">
                <h1 class="panel-title">Description</h1>
            </div>
            <div class="panel-body">

                <!-- (photo) -->
                <div class="col-sm-4 col-xs-5">
                    <h:graphicImage name="img/photo1.jpg" alt="photo de profil" class="img-thumbnail"/>
                </div>

                <!-- (nom prenom) -->
                <div class="col-sm-8 col-xs-12" >
                    <h:panelGroup class="editable" id="names_group" layout="block">
                        <a class="hyperspan" onclick="expandEditor('names');" id="names_toggler"></a>
                        <h3 class="panel-body-title">#{employeeDescriptionBean.names}
                            <span class="glyphicon glyphicon-pencil"/></h3>
                        <h:outputScript>collapseEditor('names');</h:outputScript>
                    </h:panelGroup>

                    <!-- (editor) Toggled by id= names_toggler -->
                    <h:panelGroup id="names" class="col-sm-9 col-xs-12 editor"  layout="block">
                        <h:form id="names_form" prependId="false">
                            <h:inputText type="text" styleClass="form-control" p:placeholder="Nom" value="#{employeeDescriptionBean.newFirstName}"/>
                            <h:inputText type="text" styleClass="form-control" p:placeholder="Prénom" value="#{employeeDescriptionBean.newLastName}"/>
                            <div class="row"></div>
                            <h:commandButton type="submit" styleClass="btn btn-default" value="OK" action="#{employeeDescriptionBean.updateNames}">
                                <f:ajax execute="@form" render="names_group" resetValues="true"/> <!-- TODO collapse editor if js{cond?'collapse()':''} -->
                            </h:commandButton>
                            <h:commandButton styleClass="btn btn-redb" onclick="collapseEditor('names');"
                                             value="Annuler">

                                <f:ajax/>
                            </h:commandButton>
                        </h:form>
                    </h:panelGroup>


                    <!-- (titre professionnel) -->
                    <div class="editable">
                        <a class="hyperspan" onclick="expandEditor('title');" id="title_toggler"></a>
                        <p><strong>#{employeeDescriptionBean.professionalTitle} <span
                                class="glyphicon glyphicon-pencil"/></strong></p>
                    </div>

                    <!-- (editor) -->
                    <div class="col-sm-8 col-xs-12 editor" id="title">
                        <input type="text" class="form-control" placeholder="Titre"/>
                        <div class="row"></div>
                        <button class="btn btn-default">OK</button>
                        <button class="btn btn-redb" onclick="collapseEditor('title');">Annuler</button>
                    </div>

                    <!-- (pays - secteur) -->
                    <div class="editable">
                        <a class="hyperspan" onclick="expandEditor('country');" id="country_toggler"></a>
                        <p>#{employeeDescriptionBean.country} | #{employeeDescriptionBean.sector} <span
                                class="glyphicon glyphicon-pencil"/></p>
                    </div>

                    <!-- (editor) -->
                    <div class="col-sm-8 col-xs-12 editor" id="country">
                        <input type="text" class="form-control" placeholder="Pays"/>
                        <input type="text" class="form-control" placeholder="Secteur"/>
                        <div class="row"></div>
                        <button class="btn btn-default">OK</button>
                        <button class="btn btn-redb" onclick="collapseEditor('country');">Annuler</button>
                    </div>

                    <!-- (formation) -->
                    <div class="editable">
                        <a class="hyperspan" onclick="expandEditor('formation');" id="formation_toggler"></a>
                        <p>#{employeeDescriptionBean.formation} <span
                                class="glyphicon glyphicon-pencil"/></p>
                    </div>

                    <!-- (editor) -->
                    <div class="col-sm-8 col-xs-12 editor" id="formation">
                        <input type="text" class="form-control" placeholder="Formation"/>
                        <div class="row"></div>
                        <button class="btn btn-default">OK</button>
                        <button class="btn btn-redb" onclick="collapseEditor('formation');">Annuler</button>
                    </div>

                    <div class="col-xs-6 row-strip">
                        <button class="btn btn-default" id="add-relation"><span
                                class="glyphicon glyphicon-plus"></span> Ajouter à mes relations
                        </button>
                    </div>
                    <!-- (nb relations) -->
                    <div class="col-xs-offset-4 col-xs-2 row-strip">
                        <p class="text-right">
                            <b>#{employeeDescriptionBean.nbRelations}</b> relations</p>
                    </div>
                </div>
                <div class="row"></div>
                <!-- (coordonées URL) -->
                <div class="col-md-12">
                    <hr class="dashed"/>
                    <div class="collapse out" style="" id="accordion2">
                        <div class="col-xs-6 row-strip">
                            <span class="secondary-text">h2ee/#{employeeDescriptionBean.url}</span>
                        </div>
                        <div class="col-xs-6 row-strip text-right">
                            <a data-toggle="collapse" data-parent="#accordion2" href="#collapseFour"
                               class="collapsed"> Coordonnées
                            </a>
                        </div>

                        <div id="collapseFour" class="panel-collapse collapse" style="height: 0px;">
                            <p><span class="glyphicon glyphicon-envelope"
                                     style="top:3px; margin-right:7px"></span> #{employeeDescriptionBean.email}
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</ui:composition>

